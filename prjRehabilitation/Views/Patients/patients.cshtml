@model IEnumerable<prjRehabilitation.ViewModel.Lin.VMPatientList>

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
<div class="container">

<div class="row">

@{
    foreach (var item in Model)
    {
        string imgSrc = "";
        if (item.fphoto != null)
        {
            var base64 = Convert.ToBase64String(item.fphoto);
            imgSrc = String.Format("data:image/gif;base64,{0}", base64);
        }
        <div class="card mt-3 border-primary text-primary w-auto" style="margin:1em">
            @if (!string.IsNullOrEmpty(imgSrc))
            {
                <img class="card-img-top" src="@imgSrc" alt="顯示錯誤" width="100" height="100" />
            }
            else
            {
                <img class="card-img-top" src="~/images/imageDefault.png" width="100" height="100" />
            }
            <div class="card-body">
                <h5 class="card-title">@item.fName</h5>
                <p class="card-text col">
                    <button class="btn btn-primary " onclick="showiframe(event)" id="@item.fid">編輯</button>
                    @Html.ActionLink("刪除", "Delete", new { id=item.fid },new { @class="btn btn-danger",onclick = "return confirm('是否刪除?')"})
                </p>
            </div>
        </div>
    }
}
    </div>

    </div>
    <script>
        var iframe = parent.document.getElementById("view");
        var turn = false; 
        function showiframe(event) {
            var id = event.target.id;
            iframe.src = `@Url.Content("~/Patients/Edit/${id}")`;
            console.log(document.getElementById("view").src);

         }
    </script>
     
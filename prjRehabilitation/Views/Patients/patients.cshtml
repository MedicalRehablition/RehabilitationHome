@model IEnumerable<prjRehabilitation.ViewModel.Lin.VMPatientList>

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "住民列表";
    Layout = "AdminLayout";
}
<style>

    htnl{
        background-image: url(https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/v870-tang-36_1.jpg?w=800&dpr=1&fit=default&crop=default&q=65&vib=3&con=3&usm=15&bg=F4F4F3&ixlib=js-2.2.1&s=d79f64b7b61002995177b5a8d81b522e);
    }
</style>
<a class="btn btn-primary" onclick="create_f()" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample" style="position:fixed;top:500px;left:0px;">
    新增住民
</a>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
<div class="container">

    <div class="row">

        @{
            foreach (var item in Model)
            {
                string imgSrc = "";
                if (item.fphoto != null)
                {
                    var base64 = Convert.ToBase64String(item.fphoto);
                    imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                }
                //<div class="card mt-3 border-primary text-primary w-auto" style="margin:1em">
                //    @if (!string.IsNullOrEmpty(imgSrc))
                //    {
                //        <img class="card-img-top" src="@imgSrc" alt="顯示錯誤" width="100" height="100" />
                //    }
                //    else
                //    {
                //        <img class="card-img-top" src="~/images/imageDefault.png" width="100" height="100" />
                //    }
                //    <div class="card-body">
                //        <h5 class="card-title">@item.fName</h5>
                //        <p class="card-text col">
                //            <button class="btn  btn-primary " onclick="showiframe(event)" id="@item.fid">編輯</button>
                //            @Html.ActionLink("刪除", "Delete", new { id=item.fid },new { @class="btn btn-danger",onclick = "return confirm('是否刪除?')"})
                //        </p>
                //    </div>
                //</div>
                <div class="col-lg-3 col-md-6 col-12 mt-4 pt-2">
                    <div class="team text-center rounded p-3 py-4">
                        @if (!string.IsNullOrEmpty(imgSrc))
                        {
                            <img class="img-fluid avatar avatar-medium shadow rounded-pill" src="@imgSrc" alt="顯示錯誤" width="200px" height="200px" />
                        }
                        else
                        {
                            <img class="img-fluid avatar avatar-medium shadow rounded-pill" src="~/images/imageDefault.png" width="200px" height="200px" />
                        }
                        <div class="content mt-3">
                            <h4 class="title mb-0">@Html.DisplayFor(modelItem=>item.fName)</h4>

                            <button class="btn  btn-primary " onclick="showiframe(event)" id="@item.fid">編輯</button>
                            @Html.ActionLink("刪除", "Delete", new { id=item.fid },new { @class="btn btn-danger",onclick = "return confirm('是否刪除?')"})

                        </div>
                    </div>
                </div>
            }
        }
    </div>

</div>
<script>
    function create_f() {
        console.log("jumping");
        window.parent.location.href = `@Url.Content("~/Patients/Create_F")`;
    }
    var iframe = parent.document.getElementById("view");
    var turn = false;
    function showiframe(event) {
        var id = event.target.id;
        iframe.src = `@Url.Content("~/Patients/Edit/${id}")`;
        console.log(document.getElementById("view").src);

    }
</script>
